---
phase: 05-ui-mobile-polish
plan: 01
type: execute
---

<objective>
Fix mobile layout overflow issues in CorrelationInsights, Dashboard episode list, and EpisodeForm.

Purpose: Ensure UI works well on mobile devices (375px+) without horizontal overflow or cramped elements.
Output: Responsive layouts that wrap properly on small screens.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./.claude/get-shit-done/templates/summary.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior work:**
@.planning/phases/04-settings-consolidation/04-02-SUMMARY.md

**Key source files:**
@src/features/analytics/CorrelationInsights.tsx
@src/pages/Dashboard.tsx
@src/features/episodes/EpisodeForm.tsx

**Issues identified:**
1. CorrelationInsights: Correlation cards (title + badge + percentage) don't wrap on mobile
2. Dashboard: Episode list items with intensity/date/badge don't stack on mobile
3. EpisodeForm: Date/time picker and sleep quality buttons cramped on small screens

**Tailwind responsive pattern:**
Use responsive prefixes: `flex-col sm:flex-row`, `w-full sm:w-auto`, `text-sm sm:text-base`
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix CorrelationInsights mobile layout</name>
  <files>src/features/analytics/CorrelationInsights.tsx</files>
  <action>
Fix the correlation card layout to stack properly on mobile:

1. Lines 115-142 (significant correlations card item):
   - Change outer div from `flex items-start gap-3` to `flex flex-col sm:flex-row sm:items-start gap-3`
   - Move percentage div (`text-right`) to show below content on mobile, right side on desktop
   - Add `w-full` to the flex-1 content div on mobile

2. Lines 123-126 (title + badge row):
   - Change from `flex items-center gap-2` to `flex flex-wrap items-center gap-2`
   - This allows the badge to wrap to next line if title is long

3. Lines 130-135 (stats row - Datenbasis + p-Wert):
   - Change from `flex items-center gap-4` to `flex flex-wrap items-center gap-x-4 gap-y-1`
   - Allows wrapping on small screens

4. Apply same fixes to lines 160-183 (non-significant correlations)

5. Percentage display (lines 137-140):
   - On mobile: show inline after title or below content
   - Change to `sm:text-right` and add mobile-first styling
  </action>
  <verify>
- Build passes: npm run build
- No TypeScript errors
  </verify>
  <done>
Correlation cards wrap properly on mobile (375px), percentage visible without horizontal scroll
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix Dashboard episode list mobile layout</name>
  <files>src/pages/Dashboard.tsx</files>
  <action>
Fix the episode list items to stack on mobile:

1. Lines 164-225 (episode list item):
   - Change outer div from `flex items-center justify-between` to `flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3`
   - This stacks content vertically on mobile

2. Lines 170-184 (intensity + date + badge row):
   - Change from `flex items-center gap-3` to `flex flex-wrap items-center gap-2 sm:gap-3`
   - Allows date and badge to wrap to next line on mobile

3. Lines 204-224 (action buttons):
   - Add `self-end sm:self-auto` to position buttons at bottom-right on mobile
   - Or keep at `flex gap-2` but ensure they don't overflow

4. Header (lines 53-68):
   - Change from `flex items-center justify-between` to `flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3`
   - "Neue Episode" button full width on mobile
  </action>
  <verify>
- Build passes: npm run build
- No TypeScript errors
  </verify>
  <done>
Episode list items stack vertically on mobile, no horizontal overflow
  </done>
</task>

<task type="auto">
  <name>Task 3: Fix EpisodeForm mobile layout</name>
  <files>src/features/episodes/EpisodeForm.tsx</files>
  <action>
Fix cramped elements on mobile:

1. Lines 332-380 (date/time picker - start time):
   - Change `flex gap-2` to `flex flex-col sm:flex-row gap-2`
   - Change time input from `w-32` to `w-full sm:w-32`
   - Date button stays `flex-1` on desktop, `w-full` on mobile

2. Lines 414-463 (date/time picker - end time):
   - Apply same fixes as start time

3. Lines 540-570 (sleep quality rating buttons):
   - Change from `flex justify-between gap-2` to `grid grid-cols-5 gap-1 sm:gap-2`
   - Or keep flex but use `gap-1` on mobile: `flex justify-between gap-1 sm:gap-2`
   - Reduce star icon size on mobile if needed

4. Header (lines 300-316):
   - Change from `flex items-center gap-4` to `flex items-center gap-3 sm:gap-4`
   - Reduce h1 text size on mobile: `text-2xl sm:text-3xl`
  </action>
  <verify>
- Build passes: npm run build
- No TypeScript errors
  </verify>
  <done>
EpisodeForm date pickers and sleep quality buttons work on mobile without overflow
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Mobile-responsive layouts for CorrelationInsights, Dashboard, and EpisodeForm</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open Chrome DevTools (F12) → Toggle device toolbar (Ctrl+Shift+M)
    3. Set viewport to 375px width (iPhone SE)

    Test each page:
    4. /analytics → Check "Signifikante Zusammenhänge" cards stack properly, no horizontal scroll
    5. /dashboard → Check episode list items stack, buttons accessible
    6. /episodes/new → Check date/time pickers stack, sleep quality buttons fit

    7. Try 414px width (standard phone) - should look even better
    8. Try 768px width (tablet) - should show side-by-side layouts
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] No horizontal scroll on mobile viewports (375px+)
- [ ] Content readable and accessible on all screen sizes
- [ ] No layout regressions on desktop
</verification>

<success_criteria>

- All tasks completed
- Mobile layouts work on 375px+ screens
- No TypeScript or build errors
- Human verification approved
- Phase 5 complete
</success_criteria>

<output>
After completion, create `.planning/phases/05-ui-mobile-polish/05-01-SUMMARY.md`
</output>
